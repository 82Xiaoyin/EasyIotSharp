# EasyIotSharp

#### ä»‹ç»
âœ¨ æ ¸å¿ƒç‰¹æ€§
ğŸ›° å¤šåè®®æ”¯æŒï¼ˆMQTT/HTTP/CoAPï¼‰

ğŸ“Š å®æ—¶æ•°æ®å¯è§†åŒ–

ğŸ® 3Dåœºæ™¯äº¤äº’æ§åˆ¶

âš¡ æ¯«ç§’çº§è®¾å¤‡å“åº”

ğŸ”— åœºæ™¯è”åŠ¨å¼•æ“

ğŸ”’ åŒå‘TLSåŠ å¯†é€šä¿¡

#### è½¯ä»¶æ¶æ„
è½¯ä»¶æ¶æ„è¯´æ˜

#### ä½¿ç”¨è¯´æ˜

ğŸ“¡ MQTT é€šè®¯ä¸»é¢˜è§„èŒƒæ–‡æ¡£

ğŸ“Œ è®¾å¤‡é€šä¿¡åè®® (DeviceMQTT)

####  è®¾å¤‡æ•°æ®ä¸ŠæŠ¥ä¸»é¢˜  ####
ğŸ“¤ è®¾å¤‡ä¸ŠæŠ¥ç±»ä¸»é¢˜
# ä¸»é¢˜æ ¼å¼                           #ç”¨é€”è¯´æ˜
| -------------------------- | --------------------- |
| `{é¡¹ç›®id}/{è®¾å¤‡id}/rawdata`    | è®¾å¤‡åŸå§‹æ•°æ®ä¸ŠæŠ¥ï¼ˆä¼ æ„Ÿå™¨æ•°æ®ã€é‡‡é›†æ•°æ®ç­‰ï¼‰ |
# ä½é¢‘æ•°æ®ç¤ºä¾‹
{
  "TenantAbbreviation": "ABC", // ç§Ÿæˆ·ç®€ç§°ï¼Œç”¨äºæ ‡è¯†æ•°æ®æ‰€å±çš„ç§Ÿæˆ·
  "ProjectId": "P2024001", // é¡¹ç›®IDï¼Œæ ‡è¯†æ•°æ®æ‰€å±çš„é¡¹ç›®
  "Time": "2024-05-15T10:30:00", // æ—¶é—´æˆ³ï¼Œè¡¨ç¤ºæ•°æ®é‡‡é›†çš„æ—¶é—´ç‚¹
  "PointType": "Temperature", // æµ‹ç‚¹ç±»å‹ï¼Œå¦‚æ¸©åº¦ã€æ¹¿åº¦ã€å‹åŠ›ç­‰
  "DataType": 1, // æ•°æ®ç±»å‹ï¼Œ1è¡¨ç¤ºä½é¢‘æ•°æ®
  "Points": [ // æµ‹ç‚¹æ•°æ®åˆ—è¡¨ï¼ŒåŒ…å«å¤šä¸ªæµ‹ç‚¹çš„æ•°æ®
    {
      "PointId": "TP001", // æµ‹ç‚¹IDï¼Œå”¯ä¸€æ ‡è¯†ä¸€ä¸ªæµ‹ç‚¹
      "IndicatorCount": 2, // æŒ‡æ ‡æ•°é‡ï¼Œè¡¨ç¤ºè¯¥æµ‹ç‚¹åŒ…å«çš„æŒ‡æ ‡ä¸ªæ•°
      "Values": [ // æ•°æ®å€¼åˆ—è¡¨ï¼ŒåŒ…å«æµ‹ç‚¹çš„å„é¡¹æŒ‡æ ‡å€¼
        {
          "Name": "Temperature", // æŒ‡æ ‡åç§°ï¼Œå¦‚æ¸©åº¦
          "Value": 25.6, // æŒ‡æ ‡å€¼ï¼Œæ•°å€¼ç±»å‹
          "Unit": "Â°C" // å•ä½ï¼Œå¦‚æ‘„æ°åº¦
        },
        {
          "Name": "Humidity", // æŒ‡æ ‡åç§°ï¼Œå¦‚æ¹¿åº¦
          "Value": 65.3, // æŒ‡æ ‡å€¼ï¼Œæ•°å€¼ç±»å‹
          "Unit": "%" // å•ä½ï¼Œå¦‚ç™¾åˆ†æ¯”
        }
      ]
    }
  ]
}

# é«˜é¢‘æ•°æ®ç¤ºä¾‹
{
  "TenantAbbreviation": "XYZ", // ç§Ÿæˆ·ç®€ç§°
  "ProjectId": "P2024002", // é¡¹ç›®ID
  "Time": "2024-05-15T14:45:00", // æ—¶é—´æˆ³
  "PointType": "Vibration", // æµ‹ç‚¹ç±»å‹ï¼Œå¦‚æŒ¯åŠ¨
  "DataType": 2, // æ•°æ®ç±»å‹ï¼Œ2è¡¨ç¤ºé«˜é¢‘æ•°æ®
  "SamplingPeriod": 10, // é‡‡é›†å‘¨æœŸï¼Œå•ä½ä¸ºæ¯«ç§’(ms)ï¼Œè¡¨ç¤ºæ¯10msé‡‡é›†ä¸€æ¬¡æ•°æ®
  "Points": [ // é«˜é¢‘æµ‹ç‚¹æ•°æ®åˆ—è¡¨
    {
      "PointId": "VP001", // æµ‹ç‚¹ID
      "IndicatorCount": 3, // æŒ‡æ ‡æ•°é‡ï¼Œè¡¨ç¤ºè¯¥æµ‹ç‚¹åŒ…å«3ä¸ªæŒ‡æ ‡
      "SampleGroups": [ // é‡‡æ ·æ•°æ®ç»„ï¼Œæ¯ç»„åŒ…å«å¤šä¸ªæŒ‡æ ‡çš„é‡‡æ ·å€¼
        [0.01, 0.02, 0.03], // ç¬¬1æ¬¡é‡‡æ ·çš„3ä¸ªæŒ‡æ ‡å€¼
        [0.02, 0.03, 0.04], // ç¬¬2æ¬¡é‡‡æ ·çš„3ä¸ªæŒ‡æ ‡å€¼
        [0.03, 0.04, 0.05], // ç¬¬3æ¬¡é‡‡æ ·çš„3ä¸ªæŒ‡æ ‡å€¼
        [0.04, 0.05, 0.06], // ç¬¬4æ¬¡é‡‡æ ·çš„3ä¸ªæŒ‡æ ‡å€¼
        [0.05, 0.06, 0.07]  // ç¬¬5æ¬¡é‡‡æ ·çš„3ä¸ªæŒ‡æ ‡å€¼
      ]
    } 
  ]
}
| `{é¡¹ç›®id}/{è®¾å¤‡id}/status`     | è®¾å¤‡çŠ¶æ€ä¸ŠæŠ¥ï¼ˆåœ¨çº¿/ç¦»çº¿ã€ç”µé‡ç­‰ï¼‰     |
{
  "timestamp": 1714348795,
  "deviceId": "CX-E-1",
  "projectId": "project001",
  "status": {
    "online": true,
    "battery": 85,
    "signal": 4,
    "workMode": "normal",
    "errorCode": 0
  },
  "lastActiveTime": "2024-05-28T10:13:15.000Z",
  "ipAddress": "192.168.1.100",
  "firmwareVersion": "1.2.3"
}
| `{é¡¹ç›®id}/{è®¾å¤‡id}/properties` | è®¾å¤‡å±æ€§å˜æ›´ä¸ŠæŠ¥ï¼ˆå¦‚é…ç½®å‚æ•°å˜åŒ–ï¼‰     |
{
  "timestamp": 1714348795,
  "deviceId": "CX-E-1",
  "projectId": "project001",
  "properties": {
    "sampleRate": 5,
    "alarmThreshold": 80,
    "displayMode": "graph",
    "powerSaveMode": true
  },
  "changeReason": "user",
  "operator": "admin"
}

| `{é¡¹ç›®id}/{è®¾å¤‡id}/events`     | è®¾å¤‡äº‹ä»¶ä¸ŠæŠ¥ï¼ˆå¼‚å¸¸ã€å‘Šè­¦ç­‰ï¼‰        |
{
  "timestamp": 1714348795,
  "deviceId": "CX-E-1",
  "projectId": "project001",
  "eventType": "alarm",
  "eventLevel": "critical",
  "eventId": "evt_12345",
  "message": "æ¸©åº¦è¿‡é«˜",
  "details": {
    "value": 85.6,
    "threshold": 80,
    "duration": 300
  },
  "status": "active"
}


####  è®¾å¤‡æ§åˆ¶ä¸‹å‘ä¸»é¢˜  ####
ğŸ“¥ æ§åˆ¶ç±»ä¸»é¢˜
# ä¸»é¢˜æ ¼å¼                           #ç”¨é€”è¯´æ˜
| ---------------------- | ------------------ |
| `{é¡¹ç›®id}/{è®¾å¤‡id}/cmd`    | æ§åˆ¶å‘½ä»¤ä¸‹å‘ï¼ˆå¦‚å¼€å…³æ§åˆ¶ï¼‰      |
| `{é¡¹ç›®id}/{è®¾å¤‡id}/config` | é…ç½®ä¿¡æ¯ä¸‹å‘ï¼ˆå¦‚å‚æ•°è®¾ç½®ï¼‰      |
| `{é¡¹ç›®id}/{è®¾å¤‡id}/ota`    | å›ºä»¶å‡çº§åŒ…ä¸‹å‘ï¼ˆè¿œç¨‹ OTA å‡çº§ï¼‰ |

####  è®¾å¤‡å“åº”ä¸»é¢˜  ####
ğŸ”„ å“åº”ç±»ä¸»é¢˜
# ä¸»é¢˜æ ¼å¼                           #ç”¨é€”è¯´æ˜     |
| ------------------------------- | ---------- |
| `{é¡¹ç›®id}/{è®¾å¤‡id}/cmd/response`    | è®¾å¤‡å¯¹æ§åˆ¶å‘½ä»¤çš„å“åº” |
| `{é¡¹ç›®id}/{è®¾å¤‡id}/config/response` | è®¾å¤‡å¯¹é…ç½®å‘½ä»¤çš„å“åº” |

####  è®¾å¤‡ç®¡ç†ç±»ä¸»é¢˜  ####
ğŸ•¹ è®¾å¤‡ç®¡ç†ç±»ä¸»é¢˜
# ä¸»é¢˜æ ¼å¼                           #ç”¨é€”è¯´æ˜     |
| ---------------------------- | ------------- |
| `{é¡¹ç›®id}/{è®¾å¤‡id}/register`     | è®¾å¤‡æ³¨å†Œï¼ˆé¦–æ¬¡ä¸Šçº¿ï¼‰    |
| `{é¡¹ç›®id}/{è®¾å¤‡id}/heartbeat`    | å¿ƒè·³åŒ…ä¸ŠæŠ¥ï¼ˆä¿æŒè¿æ¥çŠ¶æ€ï¼‰ |
| `{é¡¹ç›®id}/system/notification` | ç³»ç»Ÿå¹¿æ’­é€šçŸ¥ï¼ˆå¦‚ç»´æŠ¤é€šçŸ¥ï¼‰ |

####  åˆ†ç»„ä¸åœºæ™¯è”åŠ¨ä¸»é¢˜  ####
ğŸ­ åœºæ™¯è”åŠ¨ä¸»é¢˜
# ä¸»é¢˜æ ¼å¼                           #ç”¨é€”è¯´æ˜     |
| ----------------------------- | -------------- |
| `{é¡¹ç›®id}/group/{åˆ†ç»„id}/cmd`     | å¯¹åˆ†ç»„è®¾å¤‡ä¸‹å‘å‘½ä»¤      |
| `{é¡¹ç›®id}/scene/{åœºæ™¯id}/trigger` | è§¦å‘åœºæ™¯è”åŠ¨ï¼ˆå¦‚è‡ªåŠ¨åŒ–æ‰§è¡Œï¼‰ |

ğŸ® Unityäº¤äº’åè®® (UnityMQTT)
####  åˆ†ç»„ä¸åœºæ™¯è”åŠ¨ä¸»é¢˜  ####
# ä¸»é¢˜æ ¼å¼                           #ç”¨é€”è¯´æ˜     |
| --------------------------------------------------- | ---------------- |
| `iot/project/{projectId}/device/{deviceId}/status`  | Unityä¸ŠæŠ¥è®¾å¤‡çŠ¶æ€      | 
{
  "deviceId": "CX-E-1",
  "status": {
    "temperature": 85.6,
    "humidity": 15
  }
}
| `iot/project/{projectId}/device/{deviceId}/control` | å¹³å°å‘Unityä¸‹å‘è®¾å¤‡æ§åˆ¶å‘½ä»¤ |
{
  "deviceId": "CX-E-1",
  "controlType": "visual",
  "params": {
    "color": "#FF0000",
    "visible": true
  }
}
####  UI ç‚¹ä½äº¤äº’äº‹ä»¶  ####
# ä¸»é¢˜æ ¼å¼                           #ç”¨é€”è¯´æ˜     |
| --------------------------------------------- | -------- |
| `iot/project/{projectId}/ui/model/click`      | ç‚¹å‡»æ¨¡å‹äº‹ä»¶   |
| `iot/project/{projectId}/ui/point/click`      | ç‚¹å‡»UIç‚¹ä½   |
| `iot/project/{projectId}/ui/point/mouseEnter` | é¼ æ ‡è¿›å…¥ç‚¹ä½äº‹ä»¶ |
| `iot/project/{projectId}/ui/point/mouseExit`  | é¼ æ ‡ç¦»å¼€ç‚¹ä½äº‹ä»¶ |


####  åœºæ™¯æ§åˆ¶æŒ‡ä»¤  ####
# ä¸»é¢˜æ ¼å¼                           #ç”¨é€”è¯´æ˜     |
| ----------------------------------------------------- | ------- |
| `iot/project/{projectId}/scene/points/showAll`        | æ˜¾ç¤ºæ‰€æœ‰ç‚¹ä½  |
{
	"MethodName": "ShowAllDeviceItemUI",
	"Data": null
}
| `iot/project/{projectId}/scene/points/hideAll`        | éšè—æ‰€æœ‰ç‚¹ä½  |
{
	"MethodName": "HideAllDeviceItemUI",
	"Data": null
}
| `iot/project/{projectId}/scene/points/lightUp`        | ç‚¹äº®UIç‚¹ä½  |
{
	"MethodName": "CreateUIPoint",
	"Data": null
}
| `iot/project/{projectId}/scene/points/showAndLightUp` | æ˜¾ç¤ºå¹¶ç‚¹äº®ç‚¹ä½ |
{
	"MethodName": "GetAllDeviceInfo",
	"Data": [{
			"deviceId": "QX-01",
			"deviceColorState": "#112B7E"
		},
		{
			"deviceId": "QX-02",
			"deviceColorState": "#4EE8D0"
		}
	]
}
| `iot/project/{projectId}/scene/camera/reset`          | ç›¸æœºå¤ä½    |
{
	"MethodName": "ResetCameraView",
	"Data": null
}

| `iot/project/{projectId}/scene/camera/focus`          | ç›¸æœºèšç„¦åˆ°è®¾å¤‡ |
{
	"MethodName": "SetCameraTarget",
	"Data": [{
			"deviceId": "QX-01",
			"deviceColorState": "#112B7E"
		}
	]
}


####  ç³»ç»ŸçŠ¶æ€åŒæ­¥  ####
# ä¸»é¢˜æ ¼å¼                           #ç”¨é€”è¯´æ˜     |
| ------------------------------------------------- | ----------- |
| `iot/project/{projectId}/system/unity/loadStatus` | UnityåŠ è½½çŠ¶æ€ä¸ŠæŠ¥ |
| `iot/project/{projectId}/system/heartbeat`        | ç³»ç»Ÿå¿ƒè·³ï¼ˆåŒå‘ï¼‰    |



#### å‚ä¸è´¡çŒ®
 

 
